---
title: 内部投影变换的问题
date: 2022-1-14 10:11:16
tags:
  - 工作记录
categories: [工作记录]
---

# extent类型的投影变换

### 注意:extent的投影变换type类型为Envelope
```javascript
  params = {
    geometries:{
      "geometryType":"Envelope",
      "geometries":[{"xmin":797723.9143468714,"ymin":3383449.089372665,"xmax":798550.7389171873,"ymax":3384507.4248226695}]
    },
    inSR:2345
    outSR:2345
  }

  http://localhost/yoteam/2/services/WuChangPipe/Pipe/GeometryServer/project?token=token&t=1642215519924&geometries={"geometryType":"Envelope","geometries":[{"xmin":797723.9143468714,"ymin":3383449.089372665,"xmax":798550.7389171873,"ymax":3384507.4248226695}]}&inSR=2345&outSR=2345
```

# point类型的投影变换
```javascript
  params = {
    geometries:{
      "geometryType":"MapPoint",
      "geometries":[{"x":30.57281776,"y":114.3246037,"z":0}]
    },
    inSR: 0,
    outSR: 2345
  }
  http://localhost/yoteam/2/services/WuChangPipe/Water Affair/GeometryServer/project?token=token&t=1641799485682&geometries={"geometryType":"MapPoint","geometries":[{"x":30.57281776,"y":114.3246037,"z":0}]}&inSR=4326&outSR=2345
```

# polygon类型的投影变换

### 注意:因为此种方式的投影变换rings值字符串过长,用get方法是没法做投影变换的需要用post方法做
```javascript
  params = {
    clientType:esri
    inSR: 4326,
    outSR: 0
  }
  request = {
    "geometryType":"Polygon",
    "geometries":[{"spatialReference":{"latestWkid":0,"wkid":0},
    "rings":[[[114.02752576796453,31.67429200722827],[114.02752552494056,31.674287274436026],[114.02752480051032,31.67428257776736],[114.02752360018731,31.674277952966992],[114.0275219331067,31.67427343523241],[114.02751981195608,31.674269058946397],[114.02751725287872,31.674264857415004],[114.02751427535085,31.674260862613746],[114.02751090203323,31.674257104945838],[114.02750715859884,31.67425361301019],[114.02750307353764,31.674250413380484],[114.02749867793923,31.674247530409197],[114.02749400525683,31.67424498603751],[114.02748909105229,31.674242799629702],[114.02748397272566,31.674240987825335],[114.02747868923042,31.674239564413654],[114.02747328077714,31.674238540226803],[114.02746778852735,31.67423792305998],[114.02746225428263,31.67423771758069],[114.0274567201593,31.67423792538497],[114.02745122827365,31.67423854491246],[114.02744582042381,31.674239571427382],[114.02744053776786,31.674240997102615],[114.02743542050922,31.67424281109783],[114.02743050759257,31.674244999615304],[114.02742583640908,31.674247545987523],[114.02742144250898,31.674250430838626],[114.02741735933205,31.674253632218413],[114.0274136179535,31.674257125766236],[114.02741024684802,31.67426088488551],[114.0274072716718,31.674264880968035],[114.02740471506789,31.674269083599956],[114.02740259649353,31.674273460797078],[114.02740093207225,31.674277979248615],[114.02739973447146,31.674282604565494],[114.02739901280567,31.674287301546016],[114.02739877256727,31.674292034443855],[114.02739901558492,31.674296767235465],[114.02739974000842,31.674301463910545],[114.02740094032602,31.67430608870686],[114.02740260740129,31.674310606443743],[114.02740472854718,31.674314982733897],[114.02740728762089,31.674319184267247],[114.02741026514606,31.674323179071248],[114.02741363846185,31.67432693674298],[114.02741738189545,31.674330428684737],[114.02742146695725,31.67433362831678],[114.02742586255737,31.674336511290306],[114.02743053524247,31.67433905566463],[114.02743544945065,31.674341242075595],[114.02744056778172,31.674343053883412],[114.02744585128212,31.674344477298504],[114.02745125974111,31.674345501487764],[114.02745675199702,31.674346118656768],[114.02746228625043,31.67434632410732],[114.02746782038243,31.674346116274233],[114.0274733122745,31.67434549674359],[114.02747872012988,31.674344470231144],[114.0274840027918,31.674343044545303],[114.02748912005572,31.67434123053966],[114.02749403297602,31.674339042019753],[114.02749870416274,31.674336495638535],[114.02750309806441,31.674333610785737],[114.02750718124128,31.674330409410953],[114.02751092261819,31.674326915874715],[114.02751429372121,31.67432315676266],[114.02751726889399,31.67431916068647],[114.02751982549377,31.674314958057927],[114.02752194406288,31.674310580867402],[114.02752360847866,31.67430606241721],[114.02752480607315,31.674301437104976],[114.02752552773262,31.674296740124785],[114.02752576796453,31.67429200722827]]]}]
  }
  http://192.168.2.80:1014/yoteam/2/services/Yi_Wu_Liu/Substrate2000/GeometryServer/project?inSR=4326&outSR=0&clientType=esri&token=token
```